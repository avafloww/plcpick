#version 450
#extension GL_EXT_shader_explicit_arithmetic_types_int64 : require
#extension GL_EXT_shader_explicit_arithmetic_types_int8 : require

#include "secp256k1.glsl"

// Output: 33 uint values representing compressed pubkey bytes
layout(std430, set = 0, binding = 0) writeonly buffer Output { uint pubkey[33]; };

layout(local_size_x = 1) in;

void main() {
    // Start with G in Jacobian coordinates (Z=1)
    JacobianPoint g;
    g.x = SECP_GX;
    g.y = SECP_GY;
    g.z = secp_u256_from_u32(1u);

    // Double it: 2*G
    JacobianPoint result;
    secp_point_double(result, g);

    // Get compressed pubkey
    uint out33[33];
    secp_get_compressed_pubkey_uint(out33, result);
    for (int i = 0; i < 33; i++) pubkey[i] = out33[i];
}
