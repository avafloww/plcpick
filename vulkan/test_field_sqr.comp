#version 450
#extension GL_EXT_shader_explicit_arithmetic_types_int64 : require
#extension GL_EXT_shader_explicit_arithmetic_types_int8 : require

#include "secp256k1.glsl"

layout(std430, set = 0, binding = 0) readonly buffer InputA { uint a_limbs[8]; };
layout(std430, set = 0, binding = 1) writeonly buffer Output { uint r_limbs[8]; };

layout(local_size_x = 1) in;

void main() {
    U256 a, r;
    for (int i = 0; i < 8; i++) a.d[i] = a_limbs[i];
    secp_field_sqr(r, a);
    for (int i = 0; i < 8; i++) r_limbs[i] = r.d[i];
}
